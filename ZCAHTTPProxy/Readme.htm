<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
		<title>Справочная информация.</title>
	</head>
	<body>
	<H1>Справочная информация</H1>
	<H2>Основные особенности.</H2>
	<ul>
	    <li>Преобразует udp-мультикаст трафик IPTV в tcp-юникаст (конкретно http) трафик.</li>
	    <li>Показывает до двух каналов одновременно.</li>
	    <li>Имеет встроенный InterZet дескрамблер "ca",
	    позволяющий просматривать шифрованный контент практически на любом проигрывателе IPTV.</li>
	    <li>Имеет динамический кэш в ОЗУ и на жёстком диске, максимальный размер до 2 GB,
	    позволяющий ставить проигрывание канала на продолжительную паузу (time-shift).</li>
	    <li>Совместим с последними версиями проигрывателей IP-TV Player от BorPas и VLC, а также с WMP и MPC-HC.</li>
	    <li>Преобразует список каналов InterZet в формат M3U файла, совместимого с IP-TV Player, XBMC (v13 - v15), DVBLink и MediaPortal.</li>
	    <li>Работает в режиме авторизации через новый ca-сервер new.watch-tv.zet.</li>
		<li>Позволяет предоставлять удалённый доступ к видео файлам по протоколу http.</li>
	</ul>	
    <H2>Поддерживаемые операционные системы.</H2>
    <p>Windows XP SP3, Vista, 7, 8, 10 32-bit/64-bit</p>
	<H2>Cистемные требования.</H2>
	ОЗУ не менее 1Gb, проводной сетевой адаптер 100 мегабит или быстрее, .NET Framework не ниже 4.5.1 (или не ниже 4.0)
	<H2>Установка.</H2>
	<ol>
	    <li><H3>Настройка авторизации при помощи setupPinCA.cmd или setupMacCA.cmd.</H3>
			<p>Для setupMacCA.cmd вы должны будете указать свой зарегистрированный mac адрес устройства,
			взятого из настроек тв приставки или из другого конфигурационного файла, оставшегося от предыдущих версий программы.</p>
			<p>Для setupPinCA.cmd вы должны указать свои работающие пользовательский идентификатор устройства и пин-код,
			оставшиеся например в конфигурационном файле "config" от работающего плеера Z-TV.</p>
			<p>Наконец можно просто скопировать config файл от предыдущих версий данной программы с уже настроенной авторизацией.
			Или скопировать только один раздел &#60;AuthCA&#62;</p>
        </li>
		<li><H4>Делаем пробный запуск программы <b>ZCAHTTPProxy.exe</b>.</H4>
		<p>Пробуем скачать с неё m3u файл используя утилиту <b>m3uTools.hta</b>,
		если получилось успешно, то останавливаем сервер нажатием любой кнопки и идём дальше по пунктам.</p></li>
        <li><H3>Добавление в конфигурацию карты TVG имён телепрограммы.</H3>
            <p>Просто запускаем batch файл <b>setupM3U.cmd</b>.</p>
        </li>
        <li><H3>Скачиваете и устанавливаете последнюю версию IP-TV Player-а,
        после установки выбираете провайдера "Санкт-Петербург, InterZet".</H3>
            <p>В настройках url адреса m3u файла меняете с <b>http://watch-tv.zet/playlist.m3u</b>
            на <b>http://&#60;ип адрес прокси&#62;:порт/playlist.m3u</b>.</p>
        </li>
	</ol>
	<p><b>Внимание!</b> Если настройка ca авторизации не была произведена согласно первому пункту,
	то с конфигурацией по умолчанию прокси сервер будет показывать только открытые каналы.</p>
	<p>Если по какой-то причине хочется использовать .NET Framework не выше 4.0,
	то замените исполняемые файлы *.exe и библиотеки *.dll на версию для 4.0 из папки "dotnet.4.0".</p>
	<H2>Использование.</H2>
	<H3>ZCAHTTPProxy.exe [internalIP[:Port]] [mifaceIP]</H3>
	<ul>	
	    <li>[internalIP[:Port]] - внутренний ip адрес и порт, на котором прокси принимает входящие tcp подключения и http запросы.
	    Если порт не указан, то по умолчанию используется 7781, ip адрес по умолчанию 0.0.0.0.
	    Чтобы указать только порт используйте ключ ":порт"</li>
	    <li>[mifaceIP] - ip адрес сетевого интерфейса, на котором будет читаться мультикаст трафик.
	    Этот адрес необходимо указывать на компьютерах с несколькими сетевыми интерфейсами.</li>
	    <li>/ca-setup [ca-server[:port[|*[:port]] [mac-addr|*] - установка режима "ca" авторизации.
	    По умолчанию ca-server: "localhost:7781", mac-addr: "".
	    Со знаком "*" в качестве адреса ca-сервера в конфигурацию будет прописываться локальный hostname,
	    а в качестве mac-addr значение будет читаться из stdin.</li>
	    <li>/m3u-setup [tvg ini mapfile] - По умолчанию карта tvg имён читается из stdin, если не указан ini файл.</li>
	    <li>/stream-setup [RealTime|MemoryCache16|MemoryCache32|MemoryCache64|MemoryCache128|MemoryCache256|MemoryCache512|MemoryCache1024|MemoryCache2048] - По умолчанию используется MemoryCache32.
	    Если нужен старый режим от версии 1.1, то используйте ключ RealTime. Для отключения файлового time-shift-а используйте настройку конфигурации: ProxyStream.DisableFileCache = "true".</li>
		<li>/process-setup [High|Low] - Установка приоритета процесса, по умолчанию приоритет нормальный.
		В значении "Low" приоритет тоже нормальный, но для выполнения некоторых второстепенных задач будет использоваться пул потоков с пониженным приоритетом.</li>
		<li>/service-install - Установка сервиса в системе.</li>
		<li>/service-uninstall - Удаление сервиса из системы.</li>
		<li>/service-run - Запуск в качестве сервиса.</li>
	</ul>
	<H3>ZIPTVDump.exe mrl [file|-] [size[G][:[.]time]|:[.]time] [mifaceIP] [caURI]</H3>
	<ul>
	    <li>mrl - адрес мультикаст вещания тв канала, например udp://@235.10.10.1:1234, ca://@235.10.10.149:1234, http://127.0.0.1:7781/ca/235.10.10.83:1234.</li>
	    <li>file - путь к файлу, куда будет сохраняться поток канала, например Video001.ts.
		В случае сохранения потока в облачное хранилище яндекс.диска - https://Login:Password@webdav.yandex.ru/Video001.ts.</li>
		<li>"-" - режим записи потока в стандартный вывод консоли.</li>
	    <li>size - максимальный размер в мегабайтах или гигабайтах с суффиксом "G".</li>
	    <li>:time - дата и время X окончания записи. Когда указан префикс ".",
		то числовое значение параметра интерпретируется как количество минут отведённое на работу утилиты после запуска.</li>
	    <li>[mifaceIP] - ip адрес сетевого интерфейса, на котором будет читаться мультикаст трафик.
	    Этот адрес необходимо указывать на компьютерах с несколькими сетевыми интерфейсами.</li>
	    <li>[caURI] - адрес ca-сервера, по умолчанию "http://localhost:7781/ca/".</li>
	</ul>
	<H3>Примеры запросов m3u списка.</H3>
	<ul>
	    <li>Запрос по числовому идентификатору канала: "http://&#60;hostname&#62;/&#60;number&#62;.m3u"
	    или "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?id=&#60;number&#62;"
		или "http://&#60;hostname&#62;/&#60;number&#62;.ts".</li>
	    <li>Запрос по значению четвёртого байта ip адреса: "http://&#60;hostname&#62;/.&#60;number&#62;.m3u"
	    или "http://&#60;hostname&#62;/&#60;number&#62;.m3u?id=."
	    или "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?id=.&#60;number&#62;".</li>
	    <li>Запрос по порядковому номеру канала: "http://&#60;hostname&#62;/$&#60;number&#62;.m3u"
	    или "http://&#60;hostname&#62;/&#60;number&#62;.m3u?id=$"
	    или "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?id=$&#60;number&#62;".</li>
	    <li>Запрос по имени канала: "http://&#60;hostname&#62;/@&#60;name&#62;.m3u"
	    или "http://&#60;hostname&#62;/&#60;name&#62;.m3u?name=@"
	    или "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?name=&#60;name&#62;".</li>
	    <li>Запрос по имени группы каналов или номеру: "http://&#60;hostname&#62;/^&#60;groupname or groupnumber&#62;.m3u"
	    или "http://&#60;hostname&#62;/&#60;groupname&#62;.m3u?group=@"
	    или "http://&#60;hostname&#62;/&#60;groupnumber&#62;.m3u?group=id"
	    или "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?group=&#60;groupname or groupnumber&#62;".</li>
	    <li>Запрос только открытых каналов: "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?name=udp".</li>
	    <li>Запрос только шифрованных каналов: "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?name=ca".</li>
	    <li>Запрос всех каналов с прямыми адресами: "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?proxy=no".</li>
	    <li>Запрос всех каналов с прямыми адресами только у открытых: "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?proxy=ca".</li>
	    <li>Запрос только открытых каналов с прямыми адресами: "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?name=udp&proxy=no".</li>
	    <li>Запрос всех каналов в ansi кодировке: "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?charset=ansi".</li>
		<li>Запрос плоского списка каналов: ""http://&#60;hostname&#62;/&#60;anyname&#62;.m3u?type=flat"".</li>
		<li>Запрос списка каналов в формате адресов ts: ""http://&#60;hostname&#62;/&#60;anyname&#62;.m3u?format=ts"".</li>
	    <li>Запрос каналов в стандартном виде без расширенных параметров (совместим с медиа центром MediaPortal): "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?format=std".</li>
	    <li>Запрос каналов в формате двойной вложенности (совместим с WMP): "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?format=lv2".</li>
	    <li>Запрос каналов в формате для последующей конвертации в html список: "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?format=lv2id".</li>
	    <li>Формат совместимый c DVBLink и XBMC: "http://&#60;hostname&#62;/&#60;filename&#62;.m3u?m3uid=epg".</li>
	</ul>
	<H2>Конфигурация ZCAHTTPProxy.exe.</H2>	
    <H3>&#60;appSettings&#62;</H3>
    <p>InternalIP - внутренний ip адрес, на котором прокси принимает входящие tcp подключения и http запросы.
    <br/>InternalPort - tcp порт.
    <br/>mifaceIP - ip адрес сетевого интерфейса, на котором будет читаться мультикаст трафик.</p>
	<H3>&#60;AuthCA&#62;</H3>
    <p>UsrDevNumber - регистрационный номер пользователя.
    <br/>UsrDevPin - пинкод пользователя.
    <br/>CaUri - адрес ca-сервера.
    <br/>MacAddress - mac адрес</p>
    <H3>&#60;M3UList&#62;</H3>
    <p>header - заголовок m3u списка.
	<br/>weekendtvg - адрес epg файла для выходных часов (пример: weekendtvg="http://www.teleguide.info/download/old/jtv.zip").
	<br/>weekendstart - значение от 1 до 47, по умолчанию 24, промежуток времени в часах до начала выходных относительно полночи с пятницы на субботу.
    <br/>&#60;tvgmap&#62; - карта TVG имён телепрограммы.
	<br/>&#60;add id="??" epgid="??" name="epg name" m3uname="replace name" /&#62; - замена имени канала на свой вариант.
	<br/>Если параметр m3uname пуст, то замены не происходит.</p>
    <H3>&#60;ProxyStream&#62;</H3>
	<p>TempFolderPath - путь к каталогу, который будет использоваться для хранения файлов time-shift-а.
	<br/>DisableFileCache - отключение файлового time-shift-а.
	<br/>DisableSharedTimeShift - отключение функции разделённого time-shift-а.
	<br/>InitialReceiveTimeout - начальная проверка канала на доступность с таймаутом чтения данных. В случае отсуствия вещания сервер возвращает ошибку 404 (Not Found).
	<br/>По умолчанию значение 4 (количество секунд). Если значение 0, то проверка не проводится, любой канал открывается мгновенно и без ошибок,
	но на неактивных поступление трафика не начинается. Для возврата поведения как в предыдущих версиях прокси сервера используйте значение 0.</p>
	<H2>Предоставление доступа к папкам с видео файлами по протоколу http.</H2>
	Чтобы открыть доступ к папке с файлами через прокси сервер, необходимо в директории с программой создать ярлык *.lnk на целевой ресурс.
	<br/>Предположим мы создали ярлык Video.lnk на каталог "C:\Users\User\Videos", тогда адрес для доступа к папке по протоколу http будет выглядеть так:
	http://&#60;hostname&#62;/Video$/. Таким образом, имя сетевого ресурса совпадает с названием ярлыка папки, плюс обязательный символ "$" и завершающий слеш.
	<H2>Функция разделения time-shift-а среди клиентов.</H2>
	Во время просмотра интересной передачи иногда возникает необходимость перенести накопленный объём time-shift-а с одного устройства просмотра на другое.
	Перенос возможен только при наличии в программе действующей функции временной приостановки проигрывания канала.
	Для этого удерживайте кнопку паузы не менее тридцати секунд,
	после этого останавливайте проигрывание и в течении двух минут у вас будет возможность возобновить просмотр канала на другом устройстве.
	Возобновление просмотра работает не на каждом проигрывателе, предварительно проверяйте эту возможность, например работает на VLC и MPC.
	<H2>Поддержка облачных хранилищ.</H2>
	<H3>Яндекс.Диск</H3>
	Для записи канала на лету в облачное хранилище яндекс диска используется расширение протокола http под названием webdav и защищённый канал связи ssl.
	<br/>Пример: ZIPTVDump.exe http://127.0.0.1:7781/11.ts https://Login:Password@webdav.yandex.ru/11.ts.
	<H3>Google.Drive</H3>
	Для работы с google drive кроме утилиты ZIPTVDump.exe дополнительно понадобится программа GDiskLoader.exe.
	<br/>Пример: ZIPTVDump.exe http://127.0.0.1:7781/11.ts | GDiskLoader.exe 11.avi.
	<br/>В связи с тем, что гугл диск не очень корректно интерпретирует расширение .ts, рекоммендуется сохранять поток с расширением .avi.
	<H2>Дополнительная информация.</H2>
	<a href="License.htm">Лицензия.</a><br/><a href="Changelog.htm">История версий.</a>
	<H2>Благодарность.</H2>
	<p>Реквизиты для тех, кто хочет финансово поблагодарить за проделанную работу.</p>
    <img src="http://www.mirkrestikom.ru/images/i/yamoney-480x210.png">&nbsp;<br>&nbsp;<br>&nbsp;<b>41001687253964</b><br>&nbsp;<br>&nbsp;
	<iframe frameborder="0" allowtransparency="true" scrolling="no" src="https://money.yandex.ru/embed/shop.xml?account=41001687253964&quickpay=shop&payment-type-choice=on&writer=seller&targets=ZCAHTTPProxy&targets-hint=&default-sum=500&button-text=03&fio=on&successURL=" width="450" height="196"></iframe>	
    </br>
    <img src="http://www.webmoney.ru/img/icons/wmlogo_32.png">&nbsp;<b style="color:#0086c6;">WebMoney</b><br>&nbsp;<br>&nbsp;<b>R386262221395</b><br>&nbsp;<br>&nbsp;
	</body>
</html>